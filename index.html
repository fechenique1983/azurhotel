<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#17355B">
    <title>Azur Hotel & Spa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'azur-blue': '#17355B',
                        'azur-cream': '#EFEEE8',
                    }
                }
            }
        }
    </script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #EFEEE8;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <script>
        const { useState, useEffect, useRef } = React;

        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyB_LypCFg7wGvAL_1lmXoErtizYbn7e6Jw",
            authDomain: "azurhotel-2bfc2.firebaseapp.com",
            databaseURL: "https://azurhotel-2bfc2-default-rtdb.firebaseio.com",
            projectId: "azurhotel-2bfc2",
            storageBucket: "azurhotel-2bfc2.appspot.com",
            messagingSenderId: "1044293260996",
            appId: "1:1044293260996:web:9048cbe9a0b944b99b1b91"
        };

        let db = null;
        let storage = null;
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            db = firebase.database();
            storage = firebase.storage();
            console.log("âœ… Firebase conectado");
        } catch (error) {
            console.error("âŒ Error Firebase:", error);
        }

        function AzurHotelApp() {
            const [user, setUser] = useState(null);
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [rooms, setRooms] = useState([]);
            const [selectedRoom, setSelectedRoom] = useState(null);
            const [statusHistory, setStatusHistory] = useState([]);
            const [showChat, setShowChat] = useState(false);
            const [activeGroup, setActiveGroup] = useState(null);
            const [messages, setMessages] = useState({});
            const [newMessage, setNewMessage] = useState('');
            const [messagePriority, setMessagePriority] = useState('normal');
            const [notifications, setNotifications] = useState([]);
            const [unreadCount, setUnreadCount] = useState(0);
            const [imageFile, setImageFile] = useState(null);
            const [showObservations, setShowObservations] = useState(false);
            const [selectedRoomForObs, setSelectedRoomForObs] = useState(null);
            const [observations, setObservations] = useState({});
            const [newObservation, setNewObservation] = useState('');
            const [showReports, setShowReports] = useState(false);
            const [reportDateFrom, setReportDateFrom] = useState('');
            const [reportDateTo, setReportDateTo] = useState('');
            const fileInputRef = useRef(null);

            const users = [
                { id: 1, username: 'fechenique', password: 'azur2024', name: 'Federico Echenique', role: 'Room Division Manager', canEdit: true, allowedStatuses: ['all'] },
                { id: 2, username: 'recepcion', password: 'recep123', name: 'RecepciÃ³n', role: 'RecepciÃ³n', canEdit: true, allowedStatuses: ['all'] },
                { id: 3, username: 'reservas', password: 'recep123', name: 'Reservas', role: 'RecepciÃ³n', canEdit: true, allowedStatuses: ['all'] },
                { id: 4, username: 'bheredia', password: 'limpia123', name: 'Blanca Heredia', role: 'Housekeeping', canEdit: true, allowedStatuses: ['Limpia', 'En Limpieza', 'Sucia'] },
                { id: 5, username: 'narguello', password: 'limpia123', name: 'Natalia Arguello', role: 'Housekeeping', canEdit: true, allowedStatuses: ['Limpia', 'En Limpieza', 'Sucia'] },
                { id: 6, username: 'vpastori', password: 'limpia123', name: 'Victoria Pastori', role: 'Housekeeping', canEdit: true, allowedStatuses: ['Limpia', 'En Limpieza', 'Sucia'] },
                { id: 7, username: 'fguzman', password: 'limpia123', name: 'Florencia Guzman', role: 'Housekeeping', canEdit: true, allowedStatuses: ['Limpia', 'En Limpieza', 'Sucia'] },
                { id: 8, username: 'mabregu', password: 'mant123', name: 'Marcelo Abregu', role: 'Mantenimiento', canEdit: true, allowedStatuses: ['En Control Mantenimiento', 'Sucia'] },
                { id: 9, username: 'jacosta', password: 'mant123', name: 'Javier Acosta', role: 'Mantenimiento', canEdit: true, allowedStatuses: ['En Control Mantenimiento', 'Sucia'] },
                { id: 10, username: 'cbustamante', password: 'mant123', name: 'Cristian Bustamante', role: 'Mantenimiento', canEdit: true, allowedStatuses: ['En Control Mantenimiento', 'Sucia'] },
                { id: 11, username: 'pastor', password: 'mant123', name: 'Pastor', role: 'Mantenimiento', canEdit: true, allowedStatuses: ['En Control Mantenimiento', 'Sucia'] },
                { id: 12, username: 'spa', password: 'spa123', name: 'Spa', role: 'Spa', canEdit: false, allowedStatuses: [] },
                { id: 13, username: 'despensa', password: 'rest123', name: 'Despensa', role: 'Restaurant', canEdit: false, allowedStatuses: [] },
                { id: 14, username: 'lapelans', password: 'calidad123', name: 'Lucia Apelans', role: 'Calidad', canEdit: true, allowedStatuses: ['all'] },
                { id: 15, username: 'cmoyano', password: 'rrhh123', name: 'Catalina Moyano', role: 'RRHH', canEdit: false, allowedStatuses: [] }
            ];

            // DefiniciÃ³n de grupos de chat
            const chatGroups = [
                {
                    id: 'frigobar',
                    name: 'Frigobar y Olvidos',
                    members: ['RecepciÃ³n', 'Housekeeping', 'Room Division Manager']
                },
                {
                    id: 'checkout',
                    name: 'Check Out diario',
                    members: ['RecepciÃ³n', 'Mantenimiento', 'Housekeeping', 'Room Division Manager', 'Calidad']
                },
                {
                    id: 'hsk',
                    name: 'Hsk',
                    members: ['Room Division Manager', 'Housekeeping']
                },
                {
                    id: 'recepcion',
                    name: 'RecepciÃ³n',
                    members: ['Room Division Manager', 'RecepciÃ³n']
                },
                {
                    id: 'mant',
                    name: 'Mant',
                    members: ['Calidad', 'Mantenimiento']
                },
                {
                    id: 'mantenimiento',
                    name: 'Mantenimiento',
                    members: ['Calidad', 'Room Division Manager', 'RecepciÃ³n', 'Mantenimiento']
                }
            ];

            const statusOptions = [
                { value: 'Limpia', color: 'bg-green-500' },
                { value: 'Sucia', color: 'bg-red-500' },
                { value: 'En Limpieza', color: 'bg-yellow-500' },
                { value: 'En Control Mantenimiento', color: 'bg-orange-500' },
                { value: 'En Control de Calidad', color: 'bg-blue-400' },
                { value: 'Bloqueada', color: 'bg-gray-500' }
            ];

            // FunciÃ³n para determinar quiÃ©n debe recibir notificaciones segÃºn el rol
            const getNotificationRecipients = (changedByRole) => {
                if (changedByRole === 'Mantenimiento') {
                    return ['RecepciÃ³n', 'Calidad', 'Room Division Manager', 'Housekeeping'];
                } else if (changedByRole === 'Housekeeping') {
                    return ['RecepciÃ³n', 'Room Division Manager', 'Housekeeping'];
                } else if (changedByRole === 'Calidad' || changedByRole === 'Room Division Manager') {
                    return ['Calidad', 'Room Division Manager', 'RecepciÃ³n'];
                }
                return [];
            };

            // Verificar si el usuario puede ver un grupo
            const canAccessGroup = (group) => {
                return group.members.includes(user.role);
            };

            // Filtrar grupos accesibles
                        
            // Inicializar habitaciones
            useEffect(() => {
                const initialRooms = [
                    { id: 1, number: '1', category: 'Standard', floor: 'Primer Piso - Lobby', status: 'Limpia' },
                    { id: 2, number: '2', category: 'ClÃ¡sica', floor: 'Primer Piso - Lobby', status: 'Limpia' },
                    { id: 3, number: '3', category: 'ClÃ¡sica', floor: 'Primer Piso - Lobby', status: 'Sucia' },
                    { id: 4, number: '4', category: 'Standard', floor: 'Primer Piso - Lobby', status: 'Limpia' },
                    { id: 5, number: '5', category: 'ClÃ¡sica', floor: 'Primer Piso - Lobby', status: 'Limpia' },
                    { id: 6, number: '6', category: 'ClÃ¡sica', floor: 'Primer Piso - Lobby', status: 'Sucia' },
                    { id: 7, number: '7', category: 'ClÃ¡sica', floor: 'Primer Piso - Lobby', status: 'Limpia' },
                    { id: 8, number: '8', category: 'Superior', floor: 'Primer Piso - Patio', status: 'Limpia' },
                    { id: 9, number: '9', category: 'Superior', floor: 'Primer Piso - Patio', status: 'Sucia' },
                    { id: 10, number: '10', category: 'Standard', floor: 'Primer Piso - Patio', status: 'Limpia' },
                    { id: 11, number: '11', category: 'Deluxe', floor: 'Primer Piso - Patio', status: 'Limpia' },
                    { id: 18, number: '18', category: 'Suite Azur', floor: 'Primer Piso - Patio', status: 'Limpia' },
                    { id: 12, number: '12', category: 'Superior', floor: 'Tercer Piso', status: 'Limpia' },
                    { id: 14, number: '14', category: 'Deluxe', floor: 'Tercer Piso', status: 'Sucia' },
                    { id: 15, number: '15', category: 'ClÃ¡sica', floor: 'Tercer Piso - Terraza', status: 'Limpia' },
                    { id: 16, number: '16', category: 'Dpto Deluxe', floor: 'Tercer Piso - Terraza', status: 'Limpia' }
                ];

                if (db) {
                    const roomsRef = db.ref('rooms');
                    
                    roomsRef.once('value', (snapshot) => {
                        const data = snapshot.val();
                        if (!data || Object.keys(data).length === 0) {
                            initialRooms.forEach(room => {
                                roomsRef.child(room.id.toString()).set(room);
                            });
                        }
                    });

                    roomsRef.on('value', (snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            setRooms(Object.values(data));
                        }
                    });

                    const historyRef = db.ref('statusHistory');
                    historyRef.limitToLast(50).on('value', (snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            setStatusHistory(Object.values(data));
                        }
                    });

                    return () => {
                        roomsRef.off();
                        historyRef.off();
                    };
                } else {
                    setRooms(initialRooms);
                }
            }, []);

            // Cargar mensajes de chats
            useEffect(() => {
                if (!db || !user) return;

                const messagesRef = db.ref('messages');
                messagesRef.on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        setMessages(data);
                        calculateUnreadCount(data);
                    }
                });

                return () => messagesRef.off();
            }, [user]);

            // Cargar notificaciones
            useEffect(() => {
                if (!db || !user) return;

                const notificationsRef = db.ref('notifications');
                notificationsRef.orderByChild('timestamp').limitToLast(20).on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const notifArray = Object.values(data).filter(notif => {
                            return notif.recipients && notif.recipients.includes(user.role);
                        }).sort((a, b) => b.timestamp - a.timestamp);
                        setNotifications(notifArray);
                    }
                });

                return () => notificationsRef.off();
            }, [user]);

            const calculateUnreadCount = (messagesData) => {
                if (!user) return;
                
                let count = 0;
                accessibleGroups.forEach(group => {
                    const groupMessages = messagesData[group.id] || [];
                    groupMessages.forEach(msg => {
                        if (!msg.readBy || !msg.readBy.includes(user.id)) {
                            count++;
                        }
                    });
                });
                setUnreadCount(count);
            };

            const handleLogin = (e) => {
                e.preventDefault();
                const foundUser = users.find(u => u.username === username && u.password === password);
                if (foundUser) {
                    setUser(foundUser);
                    setError('');
                } else {
                    setError('Usuario o contraseÃ±a incorrectos');
                }
            };

            const handleStatusChange = (roomId, newStatus) => {
                if (!user.canEdit) return;
                
                if (user.allowedStatuses[0] !== 'all' && !user.allowedStatuses.includes(newStatus)) {
                    return;
                }

                const room = rooms.find(r => r.id === roomId);
                const now = Date.now();

                const historyEntry = {
                    roomId,
                    roomNumber: room.number,
                    previousStatus: room.status,
                    newStatus,
                    changedBy: user.name,
                    changedByRole: user.role,
                    changedAt: now
                };

                if (db) {
                    db.ref('rooms/' + roomId).update({
                        status: newStatus,
                        lastUpdated: now,
                        updatedBy: user.name
                    });

                    db.ref('statusHistory').push(historyEntry);

                    // Crear notificaciÃ³n automÃ¡tica
                    const recipients = getNotificationRecipients(user.role);
                    const notification = {
                        type: 'status_change',
                        message: `${user.name} cambiÃ³ Hab. #${room.number} de "${room.status}" a "${newStatus}"`,
                        roomNumber: room.number,
                        previousStatus: room.status,
                        newStatus: newStatus,
                        changedBy: user.name,
                        recipients: recipients,
                        timestamp: now,
                        read: false
                    };

                    db.ref('notifications').push(notification);
                }

                setSelectedRoom(null);
            };

            const handleSendMessage = async () => {
                if (!newMessage.trim() && !imageFile) return;
                if (!activeGroup || !db) return;

                const now = Date.now();
                let imageUrl = null;

                // Subir imagen si existe
                if (imageFile) {
                    try {
                        const storageRef = storage.ref();
                        const imageRef = storageRef.child(`chat-images/${activeGroup.id}/${now}_${imageFile.name}`);
                        await imageRef.put(imageFile);
                        imageUrl = await imageRef.getDownloadURL();
                    } catch (error) {
                        console.error('Error subiendo imagen:', error);
                        alert('Error al subir la imagen');
                        return;
                    }
                }

                const message = {
                    text: newMessage.trim(),
                    sender: user.name,
                    senderRole: user.role,
                    senderId: user.id,
                    timestamp: now,
                    priority: messagePriority,
                    imageUrl: imageUrl,
                    readBy: [user.id]
                };

                const groupMessages = messages[activeGroup.id] || [];
                groupMessages.push(message);

                db.ref('messages/' + activeGroup.id).set(groupMessages);

                setNewMessage('');
                setMessagePriority('normal');
                setImageFile(null);
                if (fileInputRef.current) {
                    fileInputRef.current.value = '';
                }
            };

            const markGroupAsRead = (groupId) => {
                if (!db || !user) return;

                const groupMessages = messages[groupId] || [];
                const updatedMessages = groupMessages.map(msg => {
                    if (!msg.readBy) msg.readBy = [];
                    if (!msg.readBy.includes(user.id)) {
                        msg.readBy.push(user.id);
                    }
                    return msg;
                });

                db.ref('messages/' + groupId).set(updatedMessages);
            };

            const canChangeToStatus = (status) => {
                if (!user.canEdit) return false;
                if (user.allowedStatuses[0] === 'all') return true;
                return user.allowedStatuses.includes(status);
            };

            const getStatusColor = (status) => {
                const opt = statusOptions.find(s => s.value === status);
                return opt?.color || 'bg-gray-500';
            };

            const getPriorityColor = (priority) => {
                switch(priority) {
                    case 'urgente': return 'border-l-4 border-red-500 bg-red-50';
                    case 'normal': return 'border-l-4 border-blue-500 bg-white';
                    case 'baja': return 'border-l-4 border-gray-300 bg-gray-50';
                    default: return 'bg-white';
                }
            };

            const groupByFloor = () => {
                const floors = {};
                rooms.forEach(room => {
                    if (!floors[room.floor]) floors[room.floor] = [];
                    floors[room.floor].push(room);
                });
                return floors;
            };

            const getUnreadCountForGroup = (groupId) => {
                if (!user) return 0;
                const groupMessages = messages[groupId] || [];
                return groupMessages.filter(msg => !msg.readBy || !msg.readBy.includes(user.id)).length;
            };
            
           // Cargar observaciones
            useEffect(() => {
                if (!db) return;

                const observationsRef = db.ref('observations');
                observationsRef.on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        setObservations(data);
                    }
                });

                return () => observationsRef.off();
            }, []);

            const handleAddObservation = () => {
                if (!newObservation.trim() || !selectedRoomForObs || !db) return;

                const now = Date.now();

                const observation = {
                    roomId: selectedRoomForObs.id,
                    roomNumber: selectedRoomForObs.number,
                    text: newObservation.trim(),
                    addedBy: user.name,
                    addedByRole: user.role,
                    timestamp: now,
                    status: selectedRoomForObs.status
                };

                const roomObservations = observations[selectedRoomForObs.id] || [];
                roomObservations.push(observation);

                db.ref('observations/' + selectedRoomForObs.id).set(roomObservations);

                setNewObservation('');
                setShowObservations(false);
                setSelectedRoomForObs(null);
            };

            const canAddObservations = (room) => {
                if (room.status !== 'En Control de Calidad') return false;
                return user.role === 'Calidad' || user.role === 'Room Division Manager';
            };

            const getRoomObservations = (roomId) => {
                return observations[roomId] || [];
            };

            const exportToExcel = (data, filename) => {
                const worksheet = data.map(row => {
                    const obj = {};
                    Object.keys(row).forEach(key => {
                        obj[key] = row[key];
                    });
                    return obj;
                });

                let csv = '';
                if (worksheet.length > 0) {
                    const headers = Object.keys(worksheet[0]);
                    csv = headers.join(',') + '\n';
                    worksheet.forEach(row => {
                        csv += headers.map(h => {
                            const value = row[h] || '';
                            return '"' + String(value).replace(/"/g, '""') + '"';
                        }).join(',') + '\n';
                    });
                }

                const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                link.click();
            };

            const generateMaintenanceReport = () => {
                const filtered = statusHistory.filter(h => {
                    const matchRole = h.changedByRole === 'Mantenimiento';
                    if (!reportDateFrom || !reportDateTo) return matchRole;
                    
                    const changeDate = new Date(h.changedAt);
                    const fromDate = new Date(reportDateFrom);
                    const toDate = new Date(reportDateTo);
                    toDate.setHours(23, 59, 59);
                    
                    return matchRole && changeDate >= fromDate && changeDate <= toDate;
                });

                const reportData = filtered.map(h => {
                    let timeInStatus = '';
                    if (h.newStatus === 'En Control Mantenimiento') {
                        const nextChange = statusHistory.find(nh => 
                            nh.roomId === h.roomId && 
                            nh.changedAt > h.changedAt &&
                            nh.previousStatus === 'En Control Mantenimiento'
                        );
                        if (nextChange) {
                            const minutes = Math.round((nextChange.changedAt - h.changedAt) / 60000);
                            timeInStatus = `${minutes} min`;
                        }
                    }

                    return {
                        'HabitaciÃ³n': h.roomNumber,
                        'Estado Anterior': h.previousStatus,
                        'Estado Nuevo': h.newStatus,
                        'CambiÃ³': h.changedBy,
                        'Fecha': new Date(h.changedAt).toLocaleDateString('es-AR'),
                        'Hora': new Date(h.changedAt).toLocaleTimeString('es-AR'),
                        'Tiempo en Estado': timeInStatus
                    };
                });

                exportToExcel(reportData, 'Reporte_Mantenimiento.csv');
            };

            const generateHousekeepingReport = () => {
                const filtered = statusHistory.filter(h => {
                    const matchRole = h.changedByRole === 'Housekeeping';
                    if (!reportDateFrom || !reportDateTo) return matchRole;
                    
                    const changeDate = new Date(h.changedAt);
                    const fromDate = new Date(reportDateFrom);
                    const toDate = new Date(reportDateTo);
                    toDate.setHours(23, 59, 59);
                    
                    return matchRole && changeDate >= fromDate && changeDate <= toDate;
                });

                const reportData = filtered.map(h => {
                    let timeInStatus = '';
                    if (h.newStatus === 'En Limpieza') {
                        const nextChange = statusHistory.find(nh => 
                            nh.roomId === h.roomId && 
                            nh.changedAt > h.changedAt &&
                            nh.previousStatus === 'En Limpieza'
                        );
                        if (nextChange) {
                            const minutes = Math.round((nextChange.changedAt - h.changedAt) / 60000);
                            timeInStatus = `${minutes} min`;
                        }
                    }

                    return {
                        'HabitaciÃ³n': h.roomNumber,
                        'Estado Anterior': h.previousStatus,
                        'Estado Nuevo': h.newStatus,
                        'CambiÃ³': h.changedBy,
                        'Fecha': new Date(h.changedAt).toLocaleDateString('es-AR'),
                        'Hora': new Date(h.changedAt).toLocaleTimeString('es-AR'),
                        'Tiempo en Estado': timeInStatus
                    };
                });

                exportToExcel(reportData, 'Reporte_Housekeeping.csv');
            };

            const generateQualityReport = () => {
                const filtered = statusHistory.filter(h => {
                    const matchStatus = h.newStatus === 'En Control de Calidad' || h.previousStatus === 'En Control de Calidad';
                    if (!reportDateFrom || !reportDateTo) return matchStatus;
                    
                    const changeDate = new Date(h.changedAt);
                    const fromDate = new Date(reportDateFrom);
                    const toDate = new Date(reportDateTo);
                    toDate.setHours(23, 59, 59);
                    
                    return matchStatus && changeDate >= fromDate && changeDate <= toDate;
                });

                const reportData = [];
                filtered.forEach(h => {
                    const roomObs = getRoomObservations(h.roomId);
                    const relevantObs = roomObs.filter(obs => 
                        obs.timestamp >= h.changedAt && 
                        obs.status === 'En Control de Calidad'
                    );

                    reportData.push({
                        'HabitaciÃ³n': h.roomNumber,
                        'Estado Anterior': h.previousStatus,
                        'Estado Nuevo': h.newStatus,
                        'CambiÃ³': h.changedBy,
                        'Fecha': new Date(h.changedAt).toLocaleDateString('es-AR'),
                        'Hora': new Date(h.changedAt).toLocaleTimeString('es-AR'),
                        'Observaciones': relevantObs.map(o => `[${o.addedBy}] ${o.text}`).join(' | ') || 'Sin observaciones'
                    });
                });

                exportToExcel(reportData, 'Reporte_Calidad.csv');
            };

            const generateCurrentStatusReport = () => {
                const reportData = rooms.map(r => ({
                    'HabitaciÃ³n': r.number,
                    'CategorÃ­a': r.category,
                    'Piso': r.floor,
                    'Estado': r.status,
                    'Ãšltima ActualizaciÃ³n': r.lastUpdated ? new Date(r.lastUpdated).toLocaleString('es-AR') : 'N/A',
                    'Actualizado Por': r.updatedBy || 'N/A'
                }));

                exportToExcel(reportData, 'Estados_Actuales.csv');
            };

            const canAccessReports = () => {
                return user.role === 'Room Division Manager' || user.role === 'RRHH' || user.role === 'Calidad';
            };
            
            // Filtrar grupos accesibles solo si hay usuario logueado
            const accessibleGroups = user ? chatGroups.filter(g => canAccessGroup(g)) : [];
            
            // Login Screen
            if (!user) {
                return React.createElement('div', {
                    className: 'min-h-screen flex items-center justify-center p-4',
                    style: { background: 'linear-gradient(135deg, #17355B 0%, #2563eb 100%)' }
                },
                    React.createElement('div', { className: 'bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full' },
                        React.createElement('div', { className: 'text-center mb-8' },
                            React.createElement('h1', { 
                                className: 'text-3xl font-bold mb-2',
                                style: { color: '#17355B' }
                            }, 'Azur Hotel & Spa'),
                            React.createElement('p', { className: 'text-gray-600' }, 'Sistema de GestiÃ³n Operativa')
                        ),
                        React.createElement('form', { onSubmit: handleLogin, className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, 'Usuario'),
                                React.createElement('input', {
                                    type: 'text',
                                    value: username,
                                    onChange: (e) => setUsername(e.target.value),
                                    className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2',
                                    placeholder: 'Ingresa tu usuario',
                                    required: true
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, 'ContraseÃ±a'),
                                React.createElement('input', {
                                    type: 'password',
                                    value: password,
                                    onChange: (e) => setPassword(e.target.value),
                                    className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2',
                                    placeholder: 'Ingresa tu contraseÃ±a',
                                    required: true
                                })
                            ),
                            error && React.createElement('div', { 
                                className: 'bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm' 
                            }, error),
                            React.createElement('button', {
                                type: 'submit',
                                className: 'w-full text-white py-3 rounded-lg font-semibold hover:opacity-90 transition',
                                style: { backgroundColor: '#17355B' }
                            }, 'Iniciar SesiÃ³n')
                        ),
                        React.createElement('div', { className: 'mt-6 pt-6 border-t' },
                            React.createElement('p', { className: 'text-xs text-gray-600 mb-3 font-semibold' }, 'Usuarios de prueba:'),
                            React.createElement('div', { className: 'grid grid-cols-2 gap-2 text-xs' },
                                React.createElement('div', { className: 'bg-blue-50 p-2 rounded' },
                                    React.createElement('div', { className: 'font-semibold', style: { color: '#17355B' } }, 'Room Division Manager'),
                                    React.createElement('div', { className: 'text-blue-600' }, 'fechenique / azur2024')
                                ),
                                React.createElement('div', { className: 'bg-pink-50 p-2 rounded' },
                                    React.createElement('div', { className: 'font-semibold text-pink-800' }, 'Housekeeping'),
                                    React.createElement('div', { className: 'text-pink-600' }, 'bheredia / limpia123')
                                )
                            )
                        )
                    )
                );
            }

            // Main App
            const roomsByFloor = groupByFloor();

            return React.createElement('div', { 
                className: 'min-h-screen',
                style: { backgroundColor: '#EFEEE8' }
            },
                // Header
                React.createElement('div', { 
                    className: 'text-white shadow-lg',
                    style: { backgroundColor: '#17355B' }
                },
                    React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4' },
                        React.createElement('div', { className: 'flex justify-between items-center' },
                            React.createElement('div', null,
                                React.createElement('h1', { className: 'text-xl font-bold' }, 'Azur Hotel & Spa'),
                                React.createElement('p', { className: 'text-sm opacity-90' }, user.name + ' - ' + user.role)
                            ),
                            React.createElement('div', { className: 'flex items-center gap-3' },
                                // BotÃ³n de Reportes (solo para roles autorizados)
                                canAccessReports() && React.createElement('button', {
                                    onClick: () => setShowReports(!showReports),
                                    className: 'bg-white bg-opacity-20 p-3 rounded-lg hover:bg-opacity-30 transition'
                                },
                                    React.createElement('span', { className: 'text-2xl' }, 'ðŸ“Š')
                                ),
                                // BotÃ³n de notificaciones/chat
                                React.createElement('button', {
                                    onClick: () => setShowChat(!showChat),
                                    className: 'relative bg-white bg-opacity-20 p-3 rounded-lg hover:bg-opacity-30 transition'
                                },
                                    React.createElement('span', { className: 'text-2xl' }, 'ðŸ’¬'),
                                    unreadCount > 0 && React.createElement('span', {
                                        className: 'absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold'
                                    }, unreadCount > 99 ? '99+' : unreadCount)
                                ),
                                React.createElement('button', {
                                    onClick: () => setUser(null),
                                    className: 'bg-white bg-opacity-20 px-4 py-2 rounded-lg hover:bg-opacity-30 transition'
                                }, 'Salir')
                            )
                        )
                    )
                ),

                // Dashboard de estadÃ­sticas (para Room Division Manager, Calidad y RRHH)
                (user.role === 'Room Division Manager' || user.role === 'Calidad' || user.role === 'RRHH') && React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-6' },
                    React.createElement('div', { className: 'grid grid-cols-4 gap-4 mb-6' },
                        React.createElement('div', { className: 'bg-white rounded-lg shadow p-4' },
                            React.createElement('div', { className: 'text-sm text-gray-600' }, 'Limpias'),
                            React.createElement('div', { className: 'text-2xl font-bold text-green-600' },
                                rooms.filter(r => r.status === 'Limpia').length
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg shadow p-4' },
                            React.createElement('div', { className: 'text-sm text-gray-600' }, 'Sucias'),
                            React.createElement('div', { className: 'text-2xl font-bold text-red-600' },
                                rooms.filter(r => r.status === 'Sucia').length
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg shadow p-4' },
                            React.createElement('div', { className: 'text-sm text-gray-600' }, 'En Limpieza'),
                            React.createElement('div', { className: 'text-2xl font-bold text-yellow-600' },
                                rooms.filter(r => r.status === 'En Limpieza').length
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-lg shadow p-4' },
                            React.createElement('div', { className: 'text-sm text-gray-600' }, 'Total'),
                            React.createElement('div', { className: 'text-2xl font-bold', style: { color: '#17355B' } },
                                rooms.length
                            )
                        )
                    )
                ),

                // Habitaciones
                React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-6' },
                    Object.entries(roomsByFloor).map(([floor, floorRooms]) =>
                        React.createElement('div', { key: floor, className: 'mb-8' },
                            React.createElement('h2', { 
                                className: 'text-lg font-bold mb-3',
                                style: { color: '#17355B' }
                            }, floor),
                            React.createElement('div', { className: 'grid grid-cols-4 gap-3' },
                                floorRooms.map(room =>
                                    React.createElement('div', {
                                        key: room.id,
                                        className: 'relative'
                                    },
                                        React.createElement('button', {
                                            onClick: () => user.canEdit && setSelectedRoom(room),
                                            disabled: !user.canEdit,
                                            className: `w-full ${getStatusColor(room.status)} text-white p-4 rounded-lg transition hover:scale-105 ${!user.canEdit && 'opacity-75 cursor-default'}`
                                        },
                                            React.createElement('div', { className: 'text-center' },
                                                React.createElement('div', { className: 'text-3xl font-bold mb-1' }, '#' + room.number),
                                                React.createElement('div', { className: 'text-xs opacity-90 mb-1' }, room.category),
                                                React.createElement('div', { className: 'text-xs font-semibold mt-2 border-t border-white border-opacity-30 pt-2' }, room.status)
                                            )
                                        ),
                                        // BotÃ³n de observaciones si estÃ¡ en Control de Calidad
                                        canAddObservations(room) && React.createElement('button', {
                                            onClick: (e) => {
                                                e.stopPropagation();
                                                setSelectedRoomForObs(room);
                                                setShowObservations(true);
                                            },
                                            className: 'absolute top-2 right-2 bg-white text-blue-600 px-2 py-1 rounded text-xs font-bold shadow-lg hover:bg-blue-50'
                                        }, 'ðŸ“ Obs')
                                    )
                                )

                // Modal de cambio de estado
                selectedRoom && React.createElement('div', { 
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50',
                    onClick: () => setSelectedRoom(null)
                },
                    React.createElement('div', { 
                        className: 'bg-white rounded-2xl shadow-2xl max-w-md w-full',
                        onClick: (e) => e.stopPropagation()
                    },
                        React.createElement('div', { 
                            className: `${getStatusColor(selectedRoom.status)} text-white p-6 rounded-t-2xl`
                        },
                            React.createElement('h3', { className: 'text-2xl font-bold' }, 'HabitaciÃ³n #' + selectedRoom.number),
                            React.createElement('p', { className: 'opacity-90' }, selectedRoom.category)
                        ),
                        React.createElement('div', { className: 'p-6' },
                            React.createElement('p', { className: 'text-gray-700 mb-4 font-semibold' }, 'Cambiar estado a:'),
                            React.createElement('div', { className: 'space-y-2' },
                                statusOptions.map(status => {
                                    const isAllowed = canChangeToStatus(status.value);
                                    const isCurrent = status.value === selectedRoom.status;
                                    
                                    return React.createElement('button', {
                                        key: status.value,
                                        onClick: () => isAllowed && handleStatusChange(selectedRoom.id, status.value),
                                        disabled: !isAllowed,
                                        className: `w-full p-3 rounded-lg font-semibold transition ${
                                            isCurrent ? status.color + ' text-white' : 
                                            isAllowed ? 'bg-gray-100 hover:bg-gray-200' : 
                                            'bg-gray-100 opacity-50 cursor-not-allowed'
                                        }`
                                    }, status.value + (!isAllowed ? ' ðŸ”’' : ''));
                                })
                            ),
                            React.createElement('button', {
                                onClick: () => setSelectedRoom(null),
                                className: 'w-full mt-4 bg-gray-200 text-gray-700 p-3 rounded-lg font-semibold hover:bg-gray-300'
                            }, 'Cancelar')
                        )
                    )
                ),
    // Modal de Observaciones
                showObservations && selectedRoomForObs && React.createElement('div', {
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50',
                    onClick: () => setShowObservations(false)
                },
                    React.createElement('div', {
                        className: 'bg-white rounded-2xl shadow-2xl max-w-lg w-full',
                        onClick: (e) => e.stopPropagation()
                    },
                        React.createElement('div', {
                            className: 'bg-blue-400 text-white p-6 rounded-t-2xl'
                        },
                            React.createElement('h3', { className: 'text-2xl font-bold' }, 'Observaciones - Hab. #' + selectedRoomForObs.number),
                            React.createElement('p', { className: 'opacity-90 text-sm' }, 'Control de Calidad')
                        ),
                        React.createElement('div', { className: 'p-6' },
                            // Observaciones existentes
                            React.createElement('div', { className: 'mb-4' },
                                React.createElement('p', { className: 'text-sm font-semibold text-gray-700 mb-2' }, 'Observaciones anteriores:'),
                                React.createElement('div', { className: 'max-h-40 overflow-y-auto space-y-2' },
                                    getRoomObservations(selectedRoomForObs.id).length > 0 ?
                                        getRoomObservations(selectedRoomForObs.id).map((obs, idx) =>
                                            React.createElement('div', {
                                                key: idx,
                                                className: 'bg-gray-50 p-3 rounded-lg border-l-4 border-blue-400'
                                            },
                                                React.createElement('div', { className: 'text-xs text-gray-500 mb-1' },
                                                    obs.addedBy + ' - ' + new Date(obs.timestamp).toLocaleString('es-AR')
                                                ),
                                                React.createElement('div', { className: 'text-sm' }, obs.text)
                                            )
                                        )
                                    :
                                        React.createElement('p', { className: 'text-sm text-gray-500 italic' }, 'No hay observaciones aÃºn')
                                )
                            ),
                            // Nueva observaciÃ³n
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, 'Agregar nueva observaciÃ³n:'),
                                React.createElement('textarea', {
                                    value: newObservation,
                                    onChange: (e) => setNewObservation(e.target.value),
                                    className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 resize-none',
                                    rows: 4,
                                    placeholder: 'Describe las observaciones de calidad...'
                                })
                            ),
                            React.createElement('div', { className: 'flex gap-2 mt-4' },
                                React.createElement('button', {
                                    onClick: handleAddObservation,
                                    disabled: !newObservation.trim(),
                                    className: 'flex-1 bg-blue-500 text-white py-3 rounded-lg font-semibold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed'
                                }, 'Guardar ObservaciÃ³n'),
                                React.createElement('button', {
                                    onClick: () => {
                                        setShowObservations(false);
                                        setNewObservation('');
                                    },
                                    className: 'px-6 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300'
                                }, 'Cancelar')
                            )
                        )
                    )
                ),

                // Modal de Reportes
                showReports && React.createElement('div', {
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50',
                    onClick: () => setShowReports(false)
                },
                    React.createElement('div', {
                        className: 'bg-white rounded-2xl shadow-2xl max-w-2xl w-full',
                        onClick: (e) => e.stopPropagation()
                    },
                        React.createElement('div', {
                            className: 'text-white p-6 rounded-t-2xl',
                            style: { backgroundColor: '#17355B' }
                        },
                            React.createElement('h3', { className: 'text-2xl font-bold' }, 'ðŸ“Š Reportes y EstadÃ­sticas'),
                            React.createElement('p', { className: 'opacity-90 text-sm' }, 'Descarga reportes en formato Excel')
                        ),
                        React.createElement('div', { className: 'p-6' },
                            // Filtros de fecha
                            React.createElement('div', { className: 'mb-6 bg-gray-50 p-4 rounded-lg' },
                                React.createElement('p', { className: 'text-sm font-semibold text-gray-700 mb-3' }, 'Filtrar por fecha (opcional):'),
                                React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-xs text-gray-600 mb-1' }, 'Desde:'),
                                        React.createElement('input', {
                                            type: 'date',
                                            value: reportDateFrom,
                                            onChange: (e) => setReportDateFrom(e.target.value),
                                            className: 'w-full px-3 py-2 border rounded-lg text-sm'
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-xs text-gray-600 mb-1' }, 'Hasta:'),
                                        React.createElement('input', {
                                            type: 'date',
                                            value: reportDateTo,
                                            onChange: (e) => setReportDateTo(e.target.value),
                                            className: 'w-full px-3 py-2 border rounded-lg text-sm'
                                        })
                                    )
                                )
                            ),
                            // Botones de reportes
                            React.createElement('div', { className: 'space-y-3' },
                                // Reporte Estados Actuales (todos los roles)
                                React.createElement('button', {
                                    onClick: generateCurrentStatusReport,
                                    className: 'w-full bg-green-500 text-white p-4 rounded-lg font-semibold hover:bg-green-600 text-left flex items-center justify-between'
                                },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: 'font-bold' }, 'ðŸ“‹ Estados Actuales'),
                                        React.createElement('div', { className: 'text-sm opacity-90' }, 'Estado actual de todas las habitaciones')
                                    ),
                                    React.createElement('span', { className: 'text-2xl' }, 'â¬‡ï¸')
                                ),
                                // Reporte Housekeeping (solo RDM y RRHH)
                                (user.role === 'Room Division Manager' || user.role === 'RRHH') && React.createElement('button', {
                                    onClick: generateHousekeepingReport,
                                    className: 'w-full bg-pink-500 text-white p-4 rounded-lg font-semibold hover:bg-pink-600 text-left flex items-center justify-between'
                                },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: 'font-bold' }, 'ðŸ§¹ Reporte Housekeeping'),
                                        React.createElement('div', { className: 'text-sm opacity-90' }, 'Cambios realizados por limpieza con tiempos')
                                    ),
                                    React.createElement('span', { className: 'text-2xl' }, 'â¬‡ï¸')
                                ),
                                // Reporte Mantenimiento (RDM, RRHH y Calidad)
                                React.createElement('button', {
                                    onClick: generateMaintenanceReport,
                                    className: 'w-full bg-orange-500 text-white p-4 rounded-lg font-semibold hover:bg-orange-600 text-left flex items-center justify-between'
                                },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: 'font-bold' }, 'ðŸ”§ Reporte Mantenimiento'),
                                        React.createElement('div', { className: 'text-sm opacity-90' }, 'Cambios realizados por mantenimiento con tiempos')
                                    ),
                                    React.createElement('span', { className: 'text-2xl' }, 'â¬‡ï¸')
                                ),
                                // Reporte Control de Calidad (solo RDM y RRHH)
                                (user.role === 'Room Division Manager' || user.role === 'RRHH') && React.createElement('button', {
                                    onClick: generateQualityReport,
                                    className: 'w-full bg-blue-500 text-white p-4 rounded-lg font-semibold hover:bg-blue-600 text-left flex items-center justify-between'
                                },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: 'font-bold' }, 'âœ… Reporte Control de Calidad'),
                                        React.createElement('div', { className: 'text-sm opacity-90' }, 'Historial con observaciones de calidad')
                                    ),
                                    React.createElement('span', { className: 'text-2xl' }, 'â¬‡ï¸')
                                )
                            ),
                            React.createElement('button', {
                                onClick: () => setShowReports(false),
                                className: 'w-full mt-4 bg-gray-200 text-gray-700 p-3 rounded-lg font-semibold hover:bg-gray-300'
                            }, 'Cerrar')
                        )
                    )
                ),

                // Panel de Chat
                    showChat && React.createElement('div', { 
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50',
                    onClick: () => setShowChat(false)
                },
                    React.createElement('div', { 
                        className: 'bg-white rounded-2xl shadow-2xl w-full max-w-4xl h-5/6 flex flex-col',
                        onClick: (e) => e.stopPropagation()
                    },
                        // Header del chat
                        React.createElement('div', { 
                            className: 'text-white p-4 rounded-t-2xl flex justify-between items-center',
                            style: { backgroundColor: '#17355B' }
                        },
                            React.createElement('h3', { className: 'text-xl font-bold' }, 
                                activeGroup ? activeGroup.name : 'MensajerÃ­a'
                            ),
                            React.createElement('button', {
                                onClick: () => setShowChat(false),
                                className: 'text-white hover:bg-white hover:bg-opacity-20 rounded-lg px-3 py-1'
                            }, 'âœ•')
                        ),

                        React.createElement('div', { className: 'flex flex-1 overflow-hidden' },
                            // Lista de grupos
                            React.createElement('div', { className: 'w-1/3 border-r overflow-y-auto' },
                                React.createElement('div', { className: 'p-3 bg-gray-100 font-semibold text-sm' }, 'Grupos de Chat'),
                                accessibleGroups.map(group => {
                                    const unreadForGroup = getUnreadCountForGroup(group.id);
                                    return React.createElement('button', {
                                        key: group.id,
                                        onClick: () => {
                                            setActiveGroup(group);
                                            markGroupAsRead(group.id);
                                        },
                                        className: `w-full text-left p-3 hover:bg-gray-100 border-b transition ${
                                            activeGroup?.id === group.id ? 'bg-blue-50 border-l-4 border-blue-500' : ''
                                        }`
                                    },
                                        React.createElement('div', { className: 'flex justify-between items-center' },
                                            React.createElement('div', null,
                                                React.createElement('div', { className: 'font-semibold' }, group.name),
                                                React.createElement('div', { className: 'text-xs text-gray-500' }, 
                                                    group.members.join(', ')
                                                )
                                            ),
                                            unreadForGroup > 0 && React.createElement('span', {
                                                className: 'bg-red-500 text-white text-xs rounded-full px-2 py-1 font-bold'
                                            }, unreadForGroup)
                                        )
                                    );
                                })
                            ),

                            // Ãrea de mensajes
                            React.createElement('div', { className: 'flex-1 flex flex-col' },
                                !activeGroup ? 
                                    React.createElement('div', { className: 'flex-1 flex items-center justify-center text-gray-500' },
                                        React.createElement('div', { className: 'text-center' },
                                            React.createElement('div', { className: 'text-4xl mb-2' }, 'ðŸ’¬'),
                                            React.createElement('div', null, 'Selecciona un grupo para comenzar')
                                        )
                                    )
                                :
                                React.createElement(React.Fragment, null,
                                    // Mensajes
                                    React.createElement('div', { className: 'flex-1 overflow-y-auto p-4 space-y-3' },
                                        (messages[activeGroup.id] || []).map((msg, idx) => {
                                            const isOwnMessage = msg.senderId === user.id;
                                            return React.createElement('div', {
                                                key: idx,
                                                className: `flex ${isOwnMessage ? 'justify-end' : 'justify-start'}`
                                            },
                                                React.createElement('div', {
                                                    className: `max-w-xs lg:max-w-md ${getPriorityColor(msg.priority)} rounded-lg p-3 ${
                                                        isOwnMessage ? 'bg-blue-500 text-white' : ''
                                                    }`
                                                },
                                                    !isOwnMessage && React.createElement('div', { 
                                                        className: 'text-xs font-semibold mb-1',
                                                        style: { color: isOwnMessage ? '#fff' : '#17355B' }
                                                    }, msg.sender + ' (' + msg.senderRole + ')'),
                                                    msg.imageUrl && React.createElement('img', {
                                                        src: msg.imageUrl,
                                                        className: 'max-w-full rounded mb-2 cursor-pointer',
                                                        onClick: () => window.open(msg.imageUrl, '_blank')
                                                    }),
                                                    msg.text && React.createElement('div', { className: 'break-words' }, msg.text),
                                                    React.createElement('div', { 
                                                        className: `text-xs mt-1 ${isOwnMessage ? 'text-blue-100' : 'text-gray-500'}`
                                                    }, new Date(msg.timestamp).toLocaleString('es-AR', {
                                                        day: '2-digit',
                                                        month: '2-digit',
                                                        hour: '2-digit',
                                                        minute: '2-digit'
                                                    })),
                                                    msg.priority !== 'normal' && React.createElement('div', {
                                                        className: `text-xs font-bold mt-1 ${
                                                            msg.priority === 'urgente' ? 'text-red-600' : 'text-gray-500'
                                                        }`
                                                    }, 'âš ï¸ ' + msg.priority.toUpperCase())
                                                )
                                            );
                                        })
                                    ),

                                    // Input de mensaje
                                    React.createElement('div', { className: 'border-t p-4 bg-gray-50' },
                                        React.createElement('div', { className: 'flex gap-2 mb-2' },
                                            React.createElement('select', {
                                                value: messagePriority,
                                                onChange: (e) => setMessagePriority(e.target.value),
                                                className: 'px-3 py-2 border rounded-lg text-sm'
                                            },
                                                React.createElement('option', { value: 'baja' }, 'ðŸ“˜ Baja'),
                                                React.createElement('option', { value: 'normal' }, 'ðŸ“— Normal'),
                                                React.createElement('option', { value: 'urgente' }, 'ðŸš¨ Urgente')
                                            ),
                                            React.createElement('input', {
                                                ref: fileInputRef,
                                                type: 'file',
                                                accept: 'image/*',
                                                onChange: (e) => setImageFile(e.target.files[0]),
                                                className: 'hidden'
                                            }),
                                            React.createElement('button', {
                                                onClick: () => fileInputRef.current?.click(),
                                                className: 'px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 text-sm font-semibold'
                                            }, 'ðŸ“Ž Foto')
                                        ),
                                        imageFile && React.createElement('div', { className: 'mb-2 text-sm text-gray-600 bg-blue-50 p-2 rounded' },
                                            'ðŸ“· ' + imageFile.name
                                        ),
                                        React.createElement('div', { className: 'flex gap-2' },
                                            React.createElement('input', {
                                                type: 'text',
                                                value: newMessage,
                                                onChange: (e) => setNewMessage(e.target.value),
                                                onKeyPress: (e) => e.key === 'Enter' && handleSendMessage(),
                                                placeholder: 'Escribe un mensaje...',
                                                className: 'flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2'
                                            }),
                                            React.createElement('button', {
                                                onClick: handleSendMessage,
                                                className: 'px-6 py-2 text-white rounded-lg font-semibold hover:opacity-90',
                                                style: { backgroundColor: '#17355B' }
                                            }, 'Enviar')
                                        )
                                    )
                                )
                            )
                        )
                    )
                ),

                // Indicador Firebase
                React.createElement('div', { className: 'fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-3 text-xs' },
                    db ? 'ðŸŸ¢ Conectado' : 'ðŸ”´ Offline'
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(AzurHotelApp));
    </script>
</body>
</html>



